{"version":3,"sources":["../../src/GPIO/funtions.ts"],"sourcesContent":["import { Gpio as gpio } from 'onoff'\r\n//use GPIO pin numbers\r\nconst stepPins = [17, 22, 27, 23];\r\n\r\n//const waterPin = new gpio(24, \"out\");\r\nconst pinNumber = stepPins.length;\r\nlet pins: gpio[] = [];\r\nconst waterTimeout = 1000;\r\n\r\n//waterPin.writeSync(1); // Set to Default\r\n\r\nlet Seq: number[][] = [];\r\nSeq[0] = [1, 0, 0, 0];\r\nSeq[1] = [1, 1, 0, 0];\r\nSeq[2] = [0, 1, 0, 0];\r\nSeq[3] = [0, 1, 1, 0];\r\nSeq[4] = [0, 0, 1, 0];\r\nSeq[5] = [0, 0, 1, 1];\r\nSeq[6] = [0, 0, 0, 1];\r\nSeq[7] = [1, 0, 0, 1];\r\nSeq[8] = [0, 0, 0, 0];\r\n\r\nconst waterPin = new gpio(24, \"out\");\r\n\r\nconst step = async function (stepCounter: number) {\r\n  return new Promise((res) => {\r\n    for (var pin = 0; pin < 4; pin++) {\r\n      if (Seq[stepCounter][pin] != 0) {\r\n        pins[pin].writeSync(1);\r\n      } else {\r\n        pins[pin].writeSync(0);\r\n      }\r\n    }\r\n\r\n    setTimeout(res, 5);\r\n  });\r\n};\r\n\r\nconst runMotor = async () => {\r\n  for (var s = 0; s < 50; s++) {\r\n    for (var pin = 0; pin < 9; pin++) {\r\n      await step(pin);\r\n    }\r\n  }\r\n};\r\n\r\nconst runWater = async (interval: number) => {\r\n  waterPin.writeSync(0);\r\n\r\n  await new Promise((res) =>\r\n    setTimeout(() => {\r\n      waterPin.writeSync(1);\r\n      res(undefined);\r\n    }, interval || waterTimeout)\r\n  );\r\n};\r\n\r\nexport {\r\n    runMotor,\r\n    step,\r\n    runWater\r\n}"],"names":["Gpio","gpio","stepPins","pinNumber","length","pins","waterTimeout","Seq","waterPin","step","stepCounter","Promise","res","pin","writeSync","setTimeout","runMotor","s","runWater","interval","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,QAAQC,IAAI,QAAQ,QAAO;AACpC,sBAAsB;AACtB,IAAMC,WAAW;IAAC;IAAI;IAAI;IAAI;CAAG;AAEjC,uCAAuC;AACvC,IAAMC,YAAYD,SAASE,MAAM;AACjC,IAAIC,OAAe,EAAE;AACrB,IAAMC,eAAe;AAErB,0CAA0C;AAE1C,IAAIC,MAAkB,EAAE;AACxBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AACrBA,GAAG,CAAC,EAAE,GAAG;IAAC;IAAG;IAAG;IAAG;CAAE;AAErB,IAAMC,WAAW,IAAIP,KAAK,IAAI;AAE9B,IAAMQ;eAAO,kBAAA,SAAgBC,WAAmB,EAAE;;YAChD;;gBAAO,IAAIC,QAAQ,SAACC,KAAQ;oBAC1B,IAAK,IAAIC,MAAM,GAAGA,MAAM,GAAGA,MAAO;wBAChC,IAAIN,GAAG,CAACG,YAAY,CAACG,IAAI,IAAI,GAAG;4BAC9BR,IAAI,CAACQ,IAAI,CAACC,SAAS,CAAC;wBACtB,OAAO;4BACLT,IAAI,CAACQ,IAAI,CAACC,SAAS,CAAC;wBACtB,CAAC;oBACH;oBAEAC,WAAWH,KAAK;gBAClB;;;IACF;oBAZMH,KAAuBC,WAAmB;;;;AAchD,IAAMM;eAAW,kBAAA,WAAY;YAClBC,GACEJ;;;;oBADFI,IAAI;;;yBAAGA,CAAAA,IAAI,EAAC;;;;oBACVJ,MAAM;;;yBAAGA,CAAAA,MAAM,CAAA;;;;oBACtB;;wBAAMJ,KAAKI;;;oBAAX;;;oBADyBA;;;;;;oBADLI;;;;;;;;;;;IAK1B;oBANMD;;;;AAQN,IAAME;eAAW,kBAAA,SAAOC,UAAqB;;;;oBAC3CX,SAASM,SAAS,CAAC;oBAEnB;;wBAAM,IAAIH,QAAQ,SAACC;mCACjBG,WAAW,WAAM;gCACfP,SAASM,SAAS,CAAC;gCACnBF,IAAIQ;4BACN,GAAGD,YAAYb;;;;oBAJjB;;;;;;IAMF;oBATMY,SAAkBC;;;;AAWxB,SACIH,QAAQ,EACRP,IAAI,EACJS,QAAQ,GACX"}