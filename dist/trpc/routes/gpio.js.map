{"version":3,"sources":["../../../src/trpc/routes/gpio.ts"],"sourcesContent":["import { router, publicProcedure, Models } from '..';\r\nimport { z } from 'zod';\r\nimport { _BreedRecordModel } from '../../zod';\r\nimport { prisma } from '../../app';\r\nimport dayjs from 'dayjs';\r\nimport { runMotor, runWater } from '../../GPIO/funtions';\r\nimport cron from 'node-cron';\r\n\r\nconst model: Models = 'breedRecord'\r\n\r\nexport const gpioRouter = router({\r\n    feed: publicProcedure.mutation(async () => {\r\n        console.log(\"GPIO Feed\")\r\n        try {\r\n            await runMotor()\r\n\r\n            return {\r\n                ok: true\r\n            }\r\n        } catch (error) {\r\n            return {\r\n                ok: false\r\n            }\r\n        }\r\n    }),\r\n    water: publicProcedure.\r\n    input(z.object({\r\n        interval: z.number().optional().default(2000)\r\n    })).mutation(async ({input: { interval }}) => {\r\n\r\n        console.log(\"GPIO Water\")\r\n        try {\r\n            await runWater(interval)\r\n\r\n            return {\r\n                ok: true\r\n            }\r\n        } catch (error) {\r\n            return {\r\n                ok: false\r\n            }\r\n        }\r\n    }),\r\n    autoFeed: publicProcedure.\r\n    input(z.object({\r\n        hour: z.string().optional(),\r\n        min: z.string().optional(),\r\n        enable: z.boolean(),\r\n    })).mutation(async ({input: { enable }}) => {\r\n        try {\r\n            \r\n          \r\n\r\n            return {\r\n                ok: true\r\n            }\r\n        } catch (error) {\r\n            return {\r\n                ok: false\r\n            }\r\n        }\r\n    }),\r\n});"],"names":["router","publicProcedure","z","runMotor","runWater","model","gpioRouter","feed","mutation","error","console","log","ok","water","input","object","interval","number","optional","default","autoFeed","hour","string","min","enable","boolean"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAM,EAAEC,eAAe,QAAgB,KAAK;AACrD,SAASC,CAAC,QAAQ,MAAM;AAIxB,SAASC,QAAQ,EAAEC,QAAQ,QAAQ,sBAAsB;AAGzD,IAAMC,QAAgB;AAEtB,OAAO,IAAMC,aAAaN,OAAO;IAC7BO,MAAMN,gBAAgBO,QAAQ,eAAC,kBAAA,WAAY;YAQ9BC;;;;oBAPTC,QAAQC,GAAG,CAAC;;;;;;;;;oBAER;;wBAAMR;;;oBAAN;oBAEA;;wBAAO;4BACHS,IAAI,IAAI;wBACZ;;;oBACKH;oBACL;;wBAAO;4BACHG,IAAI,KAAK;wBACb;;;;;;;;IAER;IACAC,OAAOZ,gBACPa,KAAK,CAACZ,EAAEa,MAAM,CAAC;QACXC,UAAUd,EAAEe,MAAM,GAAGC,QAAQ,GAAGC,OAAO,CAAC;IAC5C,IAAIX,QAAQ;mBAAC,kBAAA,gBAAiC;gBAAhBQ,UASjBP;;;;wBATiBO,iBAATF,MAASE;wBAE1BN,QAAQC,GAAG,CAAC;;;;;;;;;wBAER;;4BAAMP,SAASY;;;wBAAf;wBAEA;;4BAAO;gCACHJ,IAAI,IAAI;4BACZ;;;wBACKH;wBACL;;4BAAO;gCACHG,IAAI,KAAK;4BACb;;;;;;;;QAER;;;;;IACAQ,UAAUnB,gBACVa,KAAK,CAACZ,EAAEa,MAAM,CAAC;QACXM,MAAMnB,EAAEoB,MAAM,GAAGJ,QAAQ;QACzBK,KAAKrB,EAAEoB,MAAM,GAAGJ,QAAQ;QACxBM,QAAQtB,EAAEuB,OAAO;IACrB,IAAIjB,QAAQ;mBAAC,kBAAA,gBAA+B;gBAAdgB;;gBAAAA,eAATV,MAASU;gBAC1B,IAAI;oBAIA;;wBAAO;4BACHZ,IAAI,IAAI;wBACZ;;gBACJ,EAAE,OAAOH,OAAO;oBACZ;;wBAAO;4BACHG,IAAI,KAAK;wBACb;;gBACJ;;;;;QACJ;;;;;AACJ,GAAG"}